import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e,o as n}from"./app-BBh0_QkO.js";const t="/assets/gitweb-Wi_1fbVw.png",h={};function l(p,i){return n(),a("div",null,[...i[0]||(i[0]=[e(`<h2 id="在ubuntu上部署git-server" tabindex="-1"><a class="header-anchor" href="#在ubuntu上部署git-server"><span>在Ubuntu上部署Git Server</span></a></h2><h2 id="一、部署服务器" tabindex="-1"><a class="header-anchor" href="#一、部署服务器"><span>一、部署服务器</span></a></h2><h3 id="_1-安装必需的软件包" tabindex="-1"><a class="header-anchor" href="#_1-安装必需的软件包"><span>1.安装必需的软件包</span></a></h3><p>首先，安装Git、Apache和GitWeb：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gitweb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apache2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-配置gitweb" tabindex="-1"><a class="header-anchor" href="#_2-配置gitweb"><span>2.配置GitWeb</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nano</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/gitweb.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>GitWeb通常在Apache的配置文件中定义。首先，编辑GitWeb配置文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$projectroot</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> = </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/srv/git&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$git_temp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/tmp&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$home_link</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $my_uri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> || </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$site_name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;My Git Server&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-配置apache" tabindex="-1"><a class="header-anchor" href="#_3-配置apache"><span>3.配置Apache</span></a></h3><p>编辑Apache的GitWeb配置文件：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nano</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/apache2/conf-available/gitweb.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>一般不需要修改，文件内容如下：</p><div class="language-apache line-numbers-mode" data-highlighter="shiki" data-ext="apache" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-apache"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;IfModule </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mod_alias.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;IfModule </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mod_mime.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;IfModule </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mod_cgi.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      Define</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ENABLE_GITWEB</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/IfModule&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;IfModule </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mod_cgid.c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">      Define</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ENABLE_GITWEB</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/IfModule&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/IfModule&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/IfModule&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;IfDefine </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ENABLE_GITWEB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  Alias</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /gitweb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/share/gitweb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;Directory </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/usr/share/gitweb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    Options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> +FollowSymLinks +ExecCGI</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    AddHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cgi-script .cgi</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;/Directory&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/IfDefine&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启用GitWeb配置和CGI模块，然后重启Apache：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a2enconf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gitweb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a2enmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cgi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apache2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-测试配置" tabindex="-1"><a class="header-anchor" href="#_4-测试配置"><span>4.测试配置</span></a></h3><p>在浏览器中打开以下URL来访问GitWeb界面： http://your_server_ip/gitweb</p><figure><img src="`+t+'" alt="gitweb" tabindex="0" loading="lazy"><figcaption>gitweb</figcaption></figure><h2 id="二、gitserver管理" tabindex="-1"><a class="header-anchor" href="#二、gitserver管理"><span>二、GitServer管理</span></a></h2><p>在Ubuntu上创建一个单独的git用户，用于专门维护Git服务器。这有助于提高安全性和简化权限管理。</p><h3 id="_1-创建git用户" tabindex="-1"><a class="header-anchor" href="#_1-创建git用户"><span>1.创建git用户</span></a></h3><p>使用以下命令创建一个名为git的新用户，并为其设置一个登录shell（通常为/usr/bin/git-shell，这将限制用户只能进行Git相关操作）：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> adduser</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --system</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/bin/git-shell</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --disabled-password</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --home</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_2-初始化仓库" tabindex="-1"><a class="header-anchor" href="#_2-初始化仓库"><span>2.初始化仓库</span></a></h3><p>切换到git用户，初始化一个裸仓库：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;cd /srv/git &amp;&amp; git init --bare gittest.git&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-配置ssh访问-可选" tabindex="-1"><a class="header-anchor" href="#_3-配置ssh访问-可选"><span>3.配置SSH访问（可选）</span></a></h3><p>使用/usr/bin/git-shell作为git用户的shell将限制该用户只能执行Git操作，无法执行其他命令。这有助于增强安全性。如果需要进一步限制，考虑使用SSH的配置来限制允许的命令和操作。</p><p>如果希望通过SSH访问Git仓库，需要为git用户配置SSH公钥认证：</p><p>1.切换到git用户：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;cd ~ &amp;&amp; mkdir -p .ssh &amp;&amp; chmod 700 .ssh&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>2.添加SSH公钥到authorized_keys文件中：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nano</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /home/git/.ssh/authorized_keys</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_4-测试" tabindex="-1"><a class="header-anchor" href="#_4-测试"><span>4.测试</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> git@your_server_ip:/srv/git/gittest.git</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',36)])])}const d=s(h,[["render",l]]),g=JSON.parse('{"path":"/%E6%9E%81%E5%AE%A2%E5%B0%8F%E5%B1%8B/Ubuntu/Git%20Server.html","title":"局域网Git服务器","lang":"zh-CN","frontmatter":{"title":"局域网Git服务器","icon":"cib:git","date":"2024-07-16T00:00:00.000Z","order":2,"category":["DIY"],"tag":["NAS","RaspberryPi","Ubuntu"],"description":"在Ubuntu上部署Git Server 一、部署服务器 1.安装必需的软件包 首先，安装Git、Apache和GitWeb： 2.配置GitWeb GitWeb通常在Apache的配置文件中定义。首先，编辑GitWeb配置文件： 3.配置Apache 编辑Apache的GitWeb配置文件： 一般不需要修改，文件内容如下： 启用GitWeb配置和CG...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"局域网Git服务器\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-07-16T00:00:00.000Z\\",\\"dateModified\\":\\"2025-05-04T15:29:28.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"QSTX\\",\\"url\\":\\"https://www.github.com/qstx\\"}]}"],["meta",{"property":"og:url","content":"https://qstx.github.io/%E6%9E%81%E5%AE%A2%E5%B0%8F%E5%B1%8B/Ubuntu/Git%20Server.html"}],["meta",{"property":"og:site_name","content":"且试天下"}],["meta",{"property":"og:title","content":"局域网Git服务器"}],["meta",{"property":"og:description","content":"在Ubuntu上部署Git Server 一、部署服务器 1.安装必需的软件包 首先，安装Git、Apache和GitWeb： 2.配置GitWeb GitWeb通常在Apache的配置文件中定义。首先，编辑GitWeb配置文件： 3.配置Apache 编辑Apache的GitWeb配置文件： 一般不需要修改，文件内容如下： 启用GitWeb配置和CG..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-04T15:29:28.000Z"}],["meta",{"property":"article:tag","content":"Ubuntu"}],["meta",{"property":"article:tag","content":"RaspberryPi"}],["meta",{"property":"article:tag","content":"NAS"}],["meta",{"property":"article:published_time","content":"2024-07-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-04T15:29:28.000Z"}]]},"git":{"createdTime":1722176117000,"updatedTime":1746372568000,"contributors":[{"name":"qstx","username":"qstx","email":"2031074519@qq.com","commits":3,"url":"https://github.com/qstx"}]},"readingTime":{"minutes":1.68,"words":505},"filePathRelative":"极客小屋/Ubuntu/Git Server.md","excerpt":"<h2>在Ubuntu上部署Git Server</h2>\\n<h2>一、部署服务器</h2>\\n<h3>1.安装必需的软件包</h3>\\n<p>首先，安装Git、Apache和GitWeb：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code class=\\"language-bash\\"><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">sudo</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> apt</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> install</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> git</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> gitweb</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> apache2</span><span style=\\"--shiki-light:#986801;--shiki-dark:#D19A66\\"> -y</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{d as comp,g as data};
